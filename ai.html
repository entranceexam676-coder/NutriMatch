<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI-NutriMatch</title>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>

<script type="text/babel">

const { useState } = React;

const RecipeApp = () => {

  const [step, setStep] = useState("ingredients");
  const [ingredients, setIngredients] = useState([]);
  const [inputValue, setInputValue] = useState("");
  const [mealType, setMealType] = useState(null);
  const [preference, setPreference] = useState(null);
  const [cuisine, setCuisine] = useState(null);
  const [dietType, setDietType] = useState(null); 
  const [recipes, setRecipes] = useState([]);


  const recipeDatabase = [
    { id: 1, name: 'Chicken Biryani', cuisine: 'Punjabi', type: 'Non-Veg', ingredients: ['rice','chicken','yogurt','onion'], mealType: ['Lunch','Dinner'], nutrition:{calories:480,protein:32,fat:18,carbs:52}, preference:'richer', hasRecipe:true },
    { id: 2, name: 'Paneer Tikka Masala', cuisine: 'Punjabi', type: 'Veg', ingredients: ['paneer','tomato','cream','onion'], mealType: ['Lunch','Dinner'], nutrition:{calories:400,protein:16,fat:24,carbs:36}, preference:'richer', hasRecipe:true },
    { id: 3, name: 'Masala Dosa', cuisine:'South Indian', type:'Veg', ingredients:['rice','lentils','potato','onion'], mealType:['Breakfast','Lunch'], nutrition:{calories:320,protein:8,fat:10,carbs:54}, preference:'lighter', hasRecipe:false },
    { id: 5, name: 'Fish Curry', cuisine:'South Indian', type:'Non-Veg', ingredients:['fish','coconut','onion','spices'], mealType:['Lunch','Dinner'], nutrition:{calories:420,protein:35,fat:18,carbs:20}, preference:'richer', hasRecipe:false },
    { id: 6, name: 'Egg Fried Rice', cuisine:'Chinese', type:'Non-Veg', ingredients:['rice','egg','peas','carrot'], mealType:['Lunch','Dinner'], nutrition:{calories:370,protein:14,fat:12,carbs:45}, preference:'lighter', hasRecipe:false },
    { id: 7, name: 'Rajma Chawal', cuisine:'Punjabi', type:'Veg', ingredients:['rajma','rice','onion','tomato'], mealType:['Lunch','Dinner'], nutrition:{calories:380,protein:15,fat:9,carbs:55}, preference:'richer', hasRecipe:false },
    { id: 13, name: 'Tandoori Chicken', cuisine:'Punjabi', type:'Non-Veg', ingredients:['chicken','yogurt','spices'], mealType:['Lunch','Dinner'], nutrition:{calories:370,protein:38,fat:12,carbs:5}, preference:'lighter', hasRecipe:false }
  ];

  const addIngredient = () => {
    if (inputValue.trim() && !ingredients.includes(inputValue.toLowerCase())) {
      setIngredients([...ingredients, inputValue.toLowerCase()]);
      setInputValue("");
    }
  };

  const matchRecipes = () => {
    const matched = recipeDatabase.filter(recipe => {

      const ingredientMatch = ingredients.length > 0 && 
        recipe.ingredients.some(ing => 
          ingredients.some(userIng => ing.includes(userIng))
        );

      const dietMatch = !dietType || recipe.type === dietType;  

      const mealMatch = !mealType || recipe.mealType.includes(mealType);
      const prefMatch = !preference || recipe.preference === preference;
      const cuisineMatch = !cuisine || recipe.cuisine === cuisine;

      return ingredientMatch && mealMatch && prefMatch && cuisineMatch && dietMatch;
    });

    setRecipes(matched.length > 0 ? matched : recipeDatabase.slice(0, 3));
    setStep("results");
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-orange-50 via-red-50 to-yellow-50 p-6">
      <div className="max-w-2xl mx-auto">

        <div className="text-center mb-8">
          <div className="text-5xl mb-3">ğŸ³</div>
          <h1 className="text-5xl font-black bg-gradient-to-r from-orange-600 via-red-600 to-yellow-600 bg-clip-text text-transparent mb-3">
            NutriMatch
          </h1>
        </div>

        {/* âœ… Ingredients step */}
        {step === "ingredients" && (
          <div className="bg-white rounded-2xl shadow-2xl p-10">
            <h2 className="text-4xl font-bold mb-3">Your Ingredients</h2>

            <div className="flex gap-3 mb-5">
              <input className="flex-1 px-5 py-4 border rounded-xl"
                placeholder="e.g., rice, chicken"
                value={inputValue}
                onChange={(e)=>setInputValue(e.target.value)}
                onKeyPress={(e)=>e.key==="Enter" && addIngredient()}
              />
              <button onClick={addIngredient} className="px-6 py-4 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-xl font-bold">
                Add
              </button>
            </div>

            {ingredients.length>0 && (
              <div className="flex flex-wrap gap-3 mb-5">
                {ingredients.map(i=>(
                  <div key={i} className="bg-orange-100 px-5 py-2 rounded-full">
                    {i} <button onClick={()=>setIngredients(ingredients.filter(x=>x!==i))}>âœ–</button>
                  </div>
                ))}
              </div>
            )}

            <button disabled={ingredients.length===0}
              onClick={()=>setStep("meal")}
              className="w-full py-4 bg-orange-600 text-white rounded-xl font-bold disabled:bg-gray-300">
              Continue â†’
            </button>
          </div>
        )}

        {/* âœ… Meal Type */}
        {step === "meal" && (
          <div className="bg-white rounded-2xl shadow-2xl p-10">
            <h2 className="text-4xl font-bold mb-6">Meal Type</h2>

            <div className="grid grid-cols-2 gap-4 mb-8">
              {['Breakfast','Lunch','Dinner','Snack'].map(t=>(
                <button key={t} onClick={()=>setMealType(t)}
                  className={`p-5 rounded-xl font-bold ${mealType===t?'bg-orange-600 text-white':'bg-gray-100'}`}>
                  {t}
                </button>
              ))}
            </div>

            <button onClick={()=>setStep("preference")} className="w-full py-4 bg-orange-600 text-white rounded-xl font-bold">
              Continue â†’
            </button>
          </div>
        )}

        {/* âœ… Preference */}
        {step === "preference" && (
          <div className="bg-white rounded-2xl shadow-2xl p-10">
            <h2 className="text-4xl font-bold mb-8">Food Mood</h2>

            <div className="space-y-4 mb-8">
              <button onClick={()=>setPreference("lighter")}
                className={`w-full p-6 rounded-xl font-bold ${preference==="lighter"?'bg-green-200':'bg-gray-100'}`}>
                ğŸ¥— Lighter
              </button>

              <button onClick={()=>setPreference("richer")}
                className={`w-full p-6 rounded-xl font-bold ${preference==="richer"?'bg-orange-200':'bg-gray-100'}`}>
                ğŸ² Richer
              </button>
            </div>

            <button onClick={()=>setStep("diet")} className="w-full py-4 bg-orange-600 text-white rounded-xl font-bold">
              Continue â†’
            </button>
          </div>
        )}

        {/* âœ… NEW â€” Diet Step */}
        {step === "diet" && (
          <div className="bg-white rounded-2xl shadow-2xl p-10">
            <h2 className="text-4xl font-bold mb-8">Veg / Non-Veg?</h2>

            <div className="grid grid-cols-2 gap-4 mb-8">
              {['Veg','Non-Veg'].map(type=>(
                <button key={type} onClick={()=>setDietType(type)}
                  className={`p-6 rounded-xl font-bold ${dietType===type?'bg-green-600 text-white':'bg-gray-100'}`}>
                  {type}
                </button>
              ))}
            </div>

            <button onClick={()=>setStep("cuisine")} className="w-full py-4 bg-orange-600 text-white rounded-xl font-bold">
              Continue â†’
            </button>
          </div>
        )}

        {/* âœ… Cuisine */}
        {step === "cuisine" && (
          <div className="bg-white rounded-2xl shadow-2xl p-10">
            <h2 className="text-4xl font-bold mb-8">Cuisine</h2>

            <div className="grid grid-cols-2 gap-4 mb-8">
              {['Punjabi','South Indian','Chinese','International','Indian'].map(c=>(
                <button key={c} onClick={()=>setCuisine(c)}
                  className={`p-6 rounded-xl font-bold ${cuisine===c?'bg-orange-600 text-white':'bg-gray-100'}`}>{c}</button>
              ))}
            </div>

            <button onClick={matchRecipes} className="w-full py-4 bg-orange-600 text-white rounded-xl font-bold">
              Get Recipes â†’
            </button>
          </div>
        )}

        {/* âœ… Results */}
        {step === "results" && (
          <div className="space-y-6">

            <h2 className="text-4xl font-bold">Your Recipes</h2>

            {recipes.map(r=>(
              <div key={r.id} className="bg-white rounded-xl shadow p-6 border">

                <h3 className="text-3xl font-bold">{r.name}</h3>
                <p className="text-gray-600">{r.cuisine} â€¢ {r.type}</p>

                <p className="mt-2 font-semibold">Calories: {r.nutrition.calories}</p>

                <button disabled={!r.hasRecipe}
                  className={`w-full mt-4 py-3 rounded ${r.hasRecipe?'bg-orange-600 text-white':'bg-gray-300'}`}>
                  {r.hasRecipe ? "See Recipe" : "Coming Soon"}
                </button>
              </div>
            ))}

            <button className="w-full py-4 bg-black text-white rounded-xl font-bold"
              onClick={()=>{
                setStep("ingredients");
                setIngredients([]);
                setMealType(null);
                setPreference(null);
                setCuisine(null);
                setDietType(null);
                setRecipes([]);
              }}>
              ğŸ”„ Start Over
            </button>
          </div>
        )}
      </div>
    </div>
  );
};

ReactDOM.render(<RecipeApp />, document.getElementById("root"));

</script>
</body>
</html>
